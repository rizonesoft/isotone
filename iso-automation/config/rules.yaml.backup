# Isotone Automation Rules (Consolidated)
# Central configuration for all automation and LLM instructions
# Generated from MD documentation files - Merged and deduplicated

# ==========================================
# CRITICAL RULES (Priority 95-100)
# ==========================================

branding:
  priority: 100
  enabled: true
  context: ["*"]
  description: "Critical branding rules"
  rules:
    - "ALWAYS write 'Isotone' not 'Isotone CMS'"
    - "The rebrand happened in v0.1.5-alpha"
    - "This applies to ALL documentation, code, and UI"
  violations:
    - pattern: "Isotone CMS"
      severity: "critical"
      message: "Use 'Isotone' not 'Isotone CMS'"

search_before_create:
  priority: 95
  enabled: true
  context: ["development"]
  description: "Search for existing code before creating new"
  workflow:
    - "Use Grep to search for similar functionality"
    - "Use Glob to find related files"
    - "Check /iso-includes/css/ for existing styles"
    - "Review similar pages/components"
  rules:
    - "REUSE over CREATE"
    - "Never duplicate existing code"
    - "Always extend existing components"
  violations:
    - pattern: "Creating duplicate code without searching"
      severity: "critical"

# ==========================================
# DATABASE CONFIGURATION (Priority 90)
# ==========================================

database:
  priority: 90
  enabled: true
  context: ["database", "development", "setup", "configuration"]
  description: "Complete database configuration and operations"
  
  operations:
    rules:
      - "ALWAYS use RedBeanPHP for database operations"
      - "NEVER use PDO or mysqli directly"
      - "Table names: lowercase, no underscores (isotoneuser, isotonesetting)"
      - "Column names: can use underscores (created_at, last_login)"
      - "Foreign keys: Use tablename_id pattern"
    violations:
      - pattern: 'new PDO\('
        severity: "critical"
        message: "Use RedBeanPHP instead of PDO"
      - pattern: 'new mysqli\('
        severity: "critical"
        message: "Use RedBeanPHP instead of mysqli"
    examples:
      correct: |
        use RedBeanPHP\R;
        $user = R::findOne('isotoneuser', 'username = ?', [$username]);
        $post = R::dispense('post');
        R::store($post);
      incorrect: |
        // WRONG - Direct PDO
        $pdo = new PDO(...);
        // WRONG - Direct MySQL
        $conn = new mysqli(...);
  
  connection:
    web_context:
      host: "127.0.0.1 (converted from localhost)"
      port: 3306
      database: "isotone_db"
      username: "root"
      password: "empty"
    wsl_cli_context:
      host: "Windows host IP (auto-detected)"
      port: 3306
      database: "isotone_db"
      username: "root"
      password: "empty"
    ide_configuration:
      common_settings:
        host: "localhost or 127.0.0.1"
        port: 3306
        database: "isotone_db"
        username: "root"
        password: "empty"
      tools:
        phpstorm: "jdbc:mysql://localhost:3306/isotone_db"
        vscode: "MySQL extension by Jun Han"
        dbeaver: "MySQL connection type"
        workbench: "Default Schema: isotone_db"
        tableplus: "MySQL connection"
        heidisql: "Comes with XAMPP"
    
  redbean_orm:
    features:
      - "Creates tables automatically"
      - "No migrations required for development"
      - "Lowercase singular table names"
      - "Convention: isotoneuser, isotonesetting (no underscores)"
    table_structure:
      isotonesetting:
        - "setting_key: Configuration key"
        - "setting_value: Configuration value"
        - "setting_type: Data type"
        - "updated_at: Last update"
      isotoneuser:
        - "username: Login name"
        - "email: User email"
        - "password: Hashed password"
        - "role: User role"
        - "status: Account status"
        - "created_at: Creation timestamp"
        - "updated_at: Last update"
    best_practices:
      - "Development: freeze = false (auto-modify tables)"
      - "Production: freeze = true (lock schema)"
      - "Regular backups via phpMyAdmin"
      - "Use RedBean conventions for naming"
  
  troubleshooting:
    ide_connection:
      - "Verify XAMPP MySQL is running"
      - "Try 127.0.0.1 instead of localhost"
      - "Check Windows Firewall port 3306"
      - "Verify MySQL bind-address in my.ini"
    app_connection:
      - "Check http://localhost/isotone/"
      - "Verify isotone_db exists in phpMyAdmin"
      - "Ensure config.php exists (not config.sample.php)"
      - "Run installation wizard if needed"
    wsl_cli:
      - "Expected to auto-detect Windows IP"
      - "Use phpMyAdmin for management"
      - "Application handles WSL detection"
  
  quick_reference:
    web_app: "127.0.0.1:3306/isotone_db"
    wsl_cli: "Auto-detected Windows IP"
    ide_tools: "localhost:3306/isotone_db"
    phpmyadmin: "http://localhost/phpmyadmin"
  
  important_notes:
    - "Config is in config.php, NOT .env files"
    - "Smart detection only affects PHP application"
    - "IDEs connect directly to MySQL"
    - "External tools bypass PHP layer"

# ==========================================
# VERSION MANAGEMENT (Priority 90)
# ==========================================

version_management:
  priority: 90
  enabled: true
  context: ["version", "release", "bump", "ship"]
  description: "Comprehensive version management system"
  
  mandatory_workflow:
    - step: "Determine version type (patch/minor/major)"
      command: "Analyze changes to determine type"
    - step: "Execute version bump"
      command: "php isotone version:bump [type] [stage] [codename]"
    - step: "Generate changelog (MANDATORY)"
      command: "php isotone changelog"
    - step: "Update all documentation (MANDATORY)"
      command: "composer docs:all"
    - step: "Report completion"
      command: "Show the new version number and changes"
  
  intent_mapping:
    bug_fixes:
      triggers: ["fix that bug", "fixed the", "bug fix", "patch"]
      action: "php isotone version:bump patch"
      type: "patch"
    new_features:
      triggers: ["added", "new feature", "implemented", "created"]
      action: "php isotone version:bump minor"
      type: "minor"
    breaking_changes:
      triggers: ["breaking change", "api changed", "major update", "incompatible"]
      action: "php isotone version:bump major"
      type: "major"
    beta_release:
      triggers: ["ready for beta", "beta testing", "go to beta"]
      action: "php isotone version:bump minor beta"
      type: "minor"
      stage: "beta"
    production_release:
      triggers: ["ship it", "release 1.0", "production", "go live"]
      action: "php isotone version:bump major stable"
      type: "major"
      stage: "stable"
  
  stage_progression:
    alpha:
      next: "beta"
      when: "Core features complete"
    beta:
      next: "rc"
      when: "Testing mostly done"
    rc:
      next: "stable"
      when: "Ready for production"
    stable:
      next: "alpha"
      when: "Starting next major version"
  
  codenames:
    suggested_progression:
      - "v0.x: Genesis (beginning)"
      - "v1.0: Phoenix (rebirth/launch)"
      - "v2.0: Aurora (dawn/light)"
      - "v3.0: Titan (strength)"
      - "v4.0: Nebula (expansion)"
      - "v5.0: Olympus (peak)"
      - "v6.0: Cosmos (universe)"
      - "v7.0: Chronos (time)"
      - "v8.0: Atlas (support)"
      - "v9.0: Helios (sun)"
      - "v10.0: Zenith (pinnacle)"
  
  commands:
    version:
      command: "php isotone version"
      description: "Show version information"
    version_bump:
      command: "php isotone version:bump [type] [stage]"
      description: "Bump version number"
    changelog:
      command: "php isotone changelog"
      description: "Generate and save CHANGELOG.md"
    history:
      command: "php isotone version:history"
      description: "Show version history"

# ==========================================
# GIT & COMMIT STANDARDS (Priority 85)
# ==========================================

git_standards:
  priority: 85
  enabled: true
  context: ["development", "git", "commit"]
  description: "Git commit standards and automation"
  
  auto_commit:
    enabled: true
    description: "Git commit rules - ask first unless explicit satisfaction"
    
    explicit_satisfaction:
      description: "Auto-commit WITHOUT asking on these EXPLICIT satisfaction signals"
      triggers:
        - "perfect"
        - "thanks"
        - "good"
        - "excellent"
        - "happy with"
        - "that's perfect thanks"
        - "looks good"
      actions:
        - "Run: git add -A"
        - "Create semantic commit message"
        - "Run: git commit -m 'description'"
        - "Run: git push"
        - "Report completion"
    
    ask_permission:
      description: "Ask for permission before committing on these signals"
      triggers:
        - "let's save"
        - "commit this"
        - "save changes"
        - "push to git"
      actions:
        - "Confirm with user: 'Shall I commit these changes?'"
        - "If yes, proceed with commit"
        - "If no, skip commit"
    
    never_commit:
      description: "NEVER commit on these signals"
      triggers:
        - "wait"
        - "hold on"
        - "not ready"
        - "still working"
        - "more changes coming"
        - "don't commit"
  
  commit_message_format:
    type_prefixes:
      - "feat: New feature"
      - "fix: Bug fix"
      - "docs: Documentation"
      - "style: Code style"
      - "refactor: Code refactoring"
      - "test: Tests"
      - "chore: Maintenance"
      - "perf: Performance"
      - "ci: CI/CD"
      - "build: Build system"
    format: "[type]: [description]"
    examples:
      - "feat: Add user authentication system"
      - "fix: Resolve database connection issue"
      - "docs: Update installation guide"
    rules:
      - "Use present tense"
      - "Keep under 72 characters"
      - "Reference issue numbers when applicable"
      - "Be specific and descriptive"

# ==========================================
# DOCUMENTATION SYSTEM (Priority 85)
# ==========================================

documentation:
  priority: 85
  enabled: true
  context: ["documentation", "docs"]
  description: "Unified documentation system and maintenance"
  
  structure:
    organization:
      docs_folder:
        path: "/docs"
        purpose: "Technical documentation for developers and LLMs"
        description: "NEVER reorganize - used by automation"
        contents:
          - "LLM-DEVELOPMENT-GUIDE.md - Essential for AI developers"
          - "AI-CODING-STANDARDS.md - Coding standards"
          - "PROMPT-ENGINEERING-GUIDE.md - Prompt writing"
          - "PROJECT-STRUCTURE.md - Directory layout"
          - "API-REFERENCE.md - API documentation"
          - "HOOKS.md - Hook system reference"
      user_docs_folder:
        path: "/user-docs"
        purpose: "User-facing documentation"
        description: "Can be reorganized as needed"
        contents:
          - "Getting started guides"
          - "API documentation"
          - "User tutorials"
          - "Configuration guides"
      key_files:
        - "CLAUDE.md - Master LLM instructions"
        - "README.md - Project overview and status"
        - "NOTES.md - User notes and reminders"
        - "CHANGELOG.md - Version history"
  
  automated_workflow:
    triggers:
      git_hooks:
        pre_commit:
          when: "Every git commit"
          actions:
            - "Run composer docs:update"
            - "Run composer ide:sync"
            - "Stage updated documentation files"
            - "Run composer docs:check"
            - "Block commit if documentation has errors"
        pre_push:
          when: "Every git push"
          actions:
            - "Detect iso-automation/version.json changes"
            - "Auto-generate CHANGELOG.md if version changed"
            - "Stage changelog if updated"
            - "Final documentation validation"
      version_bump:
        when: "Running php isotone version:bump"
        actions:
          - "Update version in iso-automation/version.json"
          - "Generate CHANGELOG.md"
          - "Run composer docs:update"
          - "Run composer ide:sync"
  
  maintenance_rules:
    workflow:
      - "Update README.md status when features complete"
      - "Update relevant docs in /docs"
      - "Document new routes/endpoints"
      - "Run composer docs:check before completing"
    rules:
      - "Keep documentation in sync with code"
      - "Update file references when moved"
      - "Update code examples when APIs change"
      - "ALWAYS run composer docs:check before saying task is done"
    files_requiring_updates:
      - "README.md - Feature status, installation steps"
      - "CLAUDE.md - New patterns/rules"
      - "config.sample.php - New config variables"
      - "docs/GETTING-STARTED.md - New features"
      - "docs/LLM-DEVELOPMENT-GUIDE.md - New AI patterns"
  
  commands:
    docs_update:
      command: "composer docs:update"
      description: "Updates all documentation files"
    docs_check:
      command: "composer docs:check"
      description: "Validates documentation integrity"
    docs_sync:
      command: "composer docs:sync"
      description: "Sync user documentation"
    docs_all:
      command: "composer docs:all"
      description: "Complete documentation update"
    ide_sync:
      command: "composer ide:sync"
      description: "Sync IDE rules to .windsurf/"

# ==========================================
# LLM DEVELOPMENT GUIDELINES (Priority 85)
# ==========================================

llm_development:
  priority: 85
  enabled: true
  context: ["*"]
  description: "Comprehensive LLM development guidelines"
  
  critical_rules:
    - "This is an LLM-driven project - read LLM guides FIRST"
    - "NO Node.js/npm - Pure PHP project"
    - "NO build steps - Direct file editing only"
    - "NO migrations - RedBeanPHP handles schema"
    - "XAMPP/shared hosting - Must work on basic hosting"
    - "PSR-12 standards - Follow PHP-FIG standards"
    - "Security first - Use .htaccess protection"
    - "Hook Naming - Use iso_ prefix for WP-equivalent hooks"
  
  required_reading:
    - "docs/LLM-DEVELOPMENT-GUIDE.md - Essential rules"
    - "docs/AI-CODING-STANDARDS.md - Coding standards"
    - "docs/PROMPT-ENGINEERING-GUIDE.md - Prompt writing"
    - "docs/LLM-CONFIG-RULES.md - Config.php rules"
  
  task_patterns:
    add_route:
      description: "Add a new page/route"
      steps:
        - "Edit app/Core/Application.php::initializeRoutes()"
        - "Add handler method in same class"
        - "Return Response object with HTML"
    create_model:
      description: "Create a data model"
      steps:
        - "Add to app/Models/"
        - "Extend \\RedBeanPHP\\SimpleModel"
        - "Name as Model_[tablename]"
    add_plugin:
      description: "Create a plugin"
      steps:
        - "Create in iso-content/plugins/[plugin-name]/"
        - "Use WordPress-style hooks with iso_ prefix"
        - "No npm/build required"
    add_theme:
      description: "Create a theme"
      steps:
        - "Create in iso-content/themes/[theme-name]/"
        - "Include style.css with theme header"
        - "Use template hierarchy system"
        - "No npm/build required"
  
  before_completing_task:
    mandatory:
      - "Run composer docs:check"
      - "Fix any documentation errors"
      - "Update relevant documentation"
      - "Test on XAMPP environment"
      - "Verify shared hosting compatibility"
  
  never_do:
    - "Never run npm install or any npm command"
    - "Never create database migrations"
    - "Never use Laravel/Symfony full framework patterns"
    - "Never add complex build processes"
    - "Never assume root URL (use /isotone/ path)"
    - "Never commit config.php to git"
    - "Never modify vendor/ directory"
    - "Never create or reference .env files"
  
  always_do:
    - "Follow PSR-12 coding standards"
    - "Add PHPDoc comments"
    - "Escape HTML output"
    - "Use RedBeanPHP for database"
    - "Test on /isotone/ URL path"
    - "Keep shared hosting compatible"
    - "Use config.php for configuration"
    - "Update affected documentation"

# ==========================================
# HOOK SYSTEM (Priority 85)
# ==========================================

hook_system:
  priority: 85
  enabled: true
  context: ["hooks", "plugins", "themes"]
  description: "Complete hook system conventions and automation"
  
  naming_conventions:
    wp_equivalent_hooks:
      description: "Use iso_ prefix instead of wp_ for WordPress-equivalent hooks"
      examples:
        - "wp_head → iso_head"
        - "wp_footer → iso_footer"
        - "wp_enqueue_scripts → iso_enqueue_scripts"
        - "wp_ajax_{action} → iso_ajax_{action}"
        - "wp_loaded → iso_loaded"
        - "wp_init → iso_init"
    wp_functions:
      description: "Functions with wp_ prefix use iso_ instead"
      examples:
        - "wp_register_script() → iso_register_script()"
        - "wp_enqueue_style() → iso_enqueue_style()"
        - "wp_localize_script() → iso_localize_script()"
        - "wp_add_inline_style() → iso_add_inline_style()"
    standard_hooks:
      description: "Hooks without wp_ prefix remain the same"
      examples:
        - "init → init"
        - "admin_menu → admin_menu"
        - "save_post → save_post"
        - "the_content → the_content"
    manipulation_functions:
      description: "Hook manipulation functions remain the same"
      examples:
        - "add_action() → add_action()"
        - "add_filter() → add_filter()"
        - "remove_action() → remove_action()"
        - "do_action() → do_action()"
        - "apply_filters() → apply_filters()"
  
  automation:
    documentation_generation:
      command: "php isotone hooks:docs"
      description: "Generate comprehensive hook documentation"
      outputs:
        - "/iso-automation/storage/hooks.json - All hooks data"
        - "/iso-automation/storage/stats.json - Hook statistics"
        - "/HOOKS.md - Main documentation"
        - "/docs/HOOK-NAMING-CONVENTIONS.md - Naming guide"
        - "/user-docs/api/hooks/ - Interactive explorer"
    scanning:
      directories:
        - "/app - Core application hooks"
        - "/iso-admin - Admin panel hooks"
        - "/iso-content/themes - Theme hooks"
        - "/iso-content/plugins - Plugin hooks"
      patterns:
        - "do_action() calls"
        - "apply_filters() calls"
        - "add_action() registrations"
        - "add_filter() registrations"
    workflow_integration:
      - "Runs automatically with composer docs:update"
      - "Part of pre-commit hooks"
      - "Updates on version bumps"
  
  implementation_guidelines:
    best_practices:
      - "Use semantic hook names"
      - "Document hook parameters"
      - "Provide usage examples"
      - "Include @since tags"
      - "Add backward compatibility"
    compatibility:
      - "Provide aliases for WordPress hooks"
      - "Support both iso_ and wp_ prefixes during transition"
      - "Document migration path"
    resources:
      - "/HOOKS.md - Complete hook reference"
      - "/docs/HOOK-NAMING-CONVENTIONS.md - Naming rules"
      - "/docs/PLUGIN-DEVELOPER-GUIDE.md - Plugin hooks"
      - "/docs/THEME-DEVELOPER-GUIDE.md - Theme hooks"

# ==========================================
# CSS & STYLING (Priority 80)
# ==========================================

css_architecture:
  priority: 80
  enabled: true
  context: ["frontend", "styling", "ui"]
  description: "CSS architecture and styling rules"
  
  strict_separation:
    admin_pages:
      path: "/iso-admin/*"
      framework: "Tailwind CSS via CDN"
      style: "Clean, modern, utility-first"
      colors: "Gray-900 background, cyan/green accents"
      do: "Use Tailwind classes (bg-gray-900, text-cyan-400)"
      dont: "Use glassmorphism or custom CSS"
    
    frontend_auth:
      path: "login, install, public pages"
      framework: "Custom modular CSS (/iso-includes/css/)"
      style: "Glassmorphism with backdrop-filter"
      classes: "iso- prefixed (iso-container, iso-btn)"
      do: "Use existing modular CSS, search before creating"
      dont: "Use Tailwind classes or create duplicate CSS"
  
  no_inline_css_policy:
    rules:
      - "ALWAYS search /iso-includes/css/ before creating styles"
      - "CHECK modular CSS files in order: base.css, layout.css, components.css, effects.css"
      - "EVALUATE if style can be modular/reusable"
      - "USE existing iso- prefix classes"
      - "ONLY use inline for truly one-off requirements"
      - "PREFER new classes in CSS modules over inline"
  
  file_structure:
    base_css: "CSS variables, fonts, resets"
    layout_css: "Page structure, containers, grids"
    components_css: "Reusable UI components"
    effects_css: "Animations and visual effects"
    isotone_css: "Main import file - include this"
  
  critical_rules:
    - "NEVER mix Tailwind and custom CSS systems"
    - "NEVER duplicate existing CSS functionality"
    - "ALWAYS check which context you're in"
    - "ALWAYS search /iso-includes/css/ first"
    - "ALWAYS use appropriate system for context"

# ==========================================
# CONFIGURATION SYSTEM (Priority 80)
# ==========================================

configuration:
  priority: 80
  enabled: true
  context: ["setup", "configuration", "install"]
  description: "Configuration system rules"
  
  critical_rule: "NO .ENV FILES - USE config.php"
  
  setup:
    location: "/config.php in root directory"
    template: "/config.sample.php (tracked in git)"
    actual: "/config.php (ignored by git)"
    process:
      - "cp config.sample.php config.php"
      - "Edit config.php with credentials"
  
  constants:
    database:
      - "DB_HOST - Database server"
      - "DB_NAME - Database name"
      - "DB_USER - Database username"
      - "DB_PASSWORD - Database password"
    development:
      - "DEBUG_MODE - Enable debugging"
      - "DISPLAY_ERRORS - Show errors"
    application:
      - "SITE_URL - Site URL"
      - "ADMIN_EMAIL - Admin email"
      - "ENVIRONMENT - Current environment"
  
  never:
    - "Create or reference .env files"
    - "Use Dotenv package"
    - "Suggest environment variables"
  
  always:
    - "Use config.php for all configuration"
    - "Reference via PHP constants"
    - "Keep sensitive data in config.php"

# ==========================================
# PROJECT STRUCTURE (Priority 75)
# ==========================================

project_structure:
  priority: 75
  enabled: true
  context: ["*"]
  description: "Project directory structure"
  
  directories:
    app:
      description: "Core application"
      contents:
        - "Core/ - CMS functionality"
        - "Commands/ - CLI commands"
        - "Models/ - Data models"
        - "Services/ - Business logic"
    iso_admin:
      description: "Admin panel"
      contents:
        - "Admin pages and UI"
        - "Uses Tailwind CSS"
    iso_includes:
      description: "Shared resources"
      contents:
        - "assets/ - Images, logos"
        - "css/ - Modular CSS (NO INLINE!)"
        - "js/ - Global JavaScript"
        - "scripts/ - PHP includes"
    iso_content:
      description: "User content (preserve)"
      contents:
        - "plugins/ - Installed plugins"
        - "themes/ - Installed themes"
        - "uploads/ - Media uploads"
    iso_runtime:
      description: "System generated (safe to delete)"
      contents:
        - "cache/ - Page cache"
        - "logs/ - Application logs"
        - "temp/ - Temporary files"
    config:
      description: "Configuration files"
    docs:
      description: "LLM/Technical docs (don't reorganize)"
    user_docs:
      description: "User-facing docs (well organized)"
    storage:
      description: "Application storage"
      contents:
        - "hooks/ - Hook documentation data"
  
  key_files:
    - "config.php - Main configuration (DO NOT COMMIT)"
    - "config.sample.php - Configuration template"
    - "NOTES.md - User's notes and reminders"
    - "index.php - Main entry point"
    - ".htaccess - Security & routing"
    - "isotone - CLI tool"
    - "composer.json - Dependencies"

# ==========================================
# DEVELOPMENT SETUP (Priority 75)
# ==========================================

development_setup:
  priority: 75
  enabled: true
  context: ["setup", "install", "getting-started"]
  description: "Complete development setup guide"
  
  requirements:
    software:
      xampp:
        version: "8.2+ with PHP 8.3+"
        components: ["Apache", "MySQL/MariaDB", "phpMyAdmin"]
      php:
        version: "8.3+"
        extensions: ["mbstring", "pdo", "pdo_mysql", "curl", "json"]
      composer:
        version: "2.0+"
        purpose: "Dependency management"
    
  installation:
    quick_start:
      - "Install XAMPP for Windows"
      - "Clone to C:\\xampp\\htdocs\\isotone"
      - "Create database 'isotone_db' in phpMyAdmin"
      - "Copy config.sample.php to config.php"
      - "Edit config.php with database credentials"
      - "Run: composer install"
      - "Visit: http://localhost/isotone/install/"
    
    wsl_setup:
      - "XAMPP runs on Windows"
      - "Access from WSL via /mnt/c/xampp/htdocs/isotone"
      - "Database auto-detects Windows host IP"
      - "Use Windows browser for testing"
  
  ide_configuration:
    vscode:
      extensions:
        - "PHP Intelephense"
        - "MySQL by Jun Han"
        - "Tailwind CSS IntelliSense"
      database: "localhost:3306/isotone_db"
    phpstorm:
      database: "jdbc:mysql://localhost:3306/isotone_db"
      deployment: "Local or mounted folder"
  
  troubleshooting:
    common_issues:
      apache_not_starting:
        - "Check port 80 conflicts"
        - "Stop IIS or Skype"
        - "Run XAMPP as administrator"
      database_connection:
        - "Verify MySQL is running"
        - "Check credentials in config.php"
        - "Try 127.0.0.1 instead of localhost"
      permission_errors:
        - "Check iso-runtime/ permissions"
        - "Ensure Apache has write access"

# ==========================================
# PLUGIN & THEME DEVELOPMENT (Priority 75)
# ==========================================

plugin_development:
  priority: 75
  enabled: true
  context: ["plugins", "extensions"]
  description: "Plugin development guidelines"
  
  structure:
    location: "/iso-content/plugins/[plugin-name]/"
    required_files:
      - "[plugin-name].php - Main plugin file"
      - "readme.txt - Plugin documentation"
    header_format: |
      /**
       * Plugin Name: My Plugin
       * Description: Plugin description
       * Version: 1.0.0
       * Author: Author Name
       * License: GPL v2 or later
       */
  
  hooks_usage:
    actions: "Use add_action() with iso_ prefixed hooks"
    filters: "Use add_filter() for content modification"
    ajax: "Register with iso_ajax_{action} hooks"
    examples:
      - "add_action('iso_init', 'my_init_function');"
      - "add_filter('the_content', 'my_content_filter');"
  
  best_practices:
    - "Prefix all functions with plugin slug"
    - "Use proper nonce verification"
    - "Escape all output"
    - "Validate and sanitize input"
    - "Include uninstall cleanup"

theme_development:
  priority: 75
  enabled: true
  context: ["themes", "templates"]
  description: "Theme development guidelines"
  
  structure:
    location: "/iso-content/themes/[theme-name]/"
    required_files:
      - "style.css - Theme stylesheet with header"
      - "index.php - Main template file"
      - "functions.php - Theme functions"
    style_header: |
      /**
       * Theme Name: My Theme
       * Description: Theme description
       * Version: 1.0.0
       * Author: Author Name
       */
  
  template_hierarchy:
    - "single.php - Single post"
    - "page.php - Single page"
    - "archive.php - Archive pages"
    - "search.php - Search results"
    - "404.php - Not found"
    - "index.php - Fallback template"
  
  theme_api:
    functions:
      - "iso_head() - Header hooks"
      - "iso_footer() - Footer hooks"
      - "get_header() - Include header"
      - "get_footer() - Include footer"
      - "get_sidebar() - Include sidebar"
      - "the_loop() - WordPress-style loop"

# ==========================================
# DEVELOPMENT COMMANDS (Priority 70)
# ==========================================

development_commands:
  priority: 70
  enabled: true
  context: ["commands", "cli"]
  description: "Available development commands"
  
  composer_scripts:
    test: "Run all tests"
    test_unit: "Run unit tests only"
    test_integration: "Run integration tests"
    analyse: "Run static analysis with PHPStan"
    check_style: "Check code style (PSR-12)"
    fix_style: "Fix code style automatically"
    docs_check: "Check documentation integrity"
    docs_update: "Auto-update documentation"
    docs_sync: "Sync user documentation"
    docs_hooks: "Generate hooks documentation"
    docs_all: "Complete documentation update"
    ide_sync: "Sync IDE rules"
    version_patch: "Bump patch version"
    version_minor: "Bump minor version"
    version_major: "Bump major version"
    pre_commit: "Run pre-commit checks"
  
  isotone_cli:
    version: "Show version information"
    version_bump: "Bump version number"
    version_set: "Set version directly"
    version_history: "Show version history"
    changelog: "Generate CHANGELOG.md"
    system: "Check system compatibility"
    db_test: "Test database connection"
    db_status: "Show database status"
    db_init: "Initialize database schema"
    hooks_docs: "Generate hooks documentation"

# ==========================================
# WORKFLOWS & AUTOMATION (Priority 65)
# ==========================================

workflows:
  priority: 65
  enabled: true
  context: ["workflow", "automation"]
  description: "Development workflows"
  
  feature_workflow:
    steps:
      - "Create feature branch"
      - "Implement feature"
      - "Update documentation"
      - "Run composer docs:check"
      - "Test thoroughly"
      - "Create pull request"
  
  bug_fix_workflow:
    steps:
      - "Reproduce issue"
      - "Create test case"
      - "Fix the bug"
      - "Verify fix"
      - "Update changelog"
      - "Submit PR"
  
  release_workflow:
    steps:
      - "Run all tests"
      - "Update version"
      - "Generate changelog"
      - "Update documentation"
      - "Tag release"
      - "Deploy"

# ==========================================
# VALIDATION & CHECKS (Priority 60)
# ==========================================

validation:
  priority: 60
  enabled: true
  context: ["validation", "checks"]
  description: "Validation rules and checks"
  
  file_references:
    description: "Validate file references in documentation"
    check: "All referenced files must exist"
  
  composer_scripts:
    description: "Ensure all composer scripts are documented"
    check: "All scripts in composer.json must be in COMMANDS.md"
  
  routes:
    description: "Validate documented routes exist"
    check: "All routes in ROUTES.md must exist in code"
  
  code_examples:
    description: "Validate PHP code examples syntax"
    check: "All PHP examples must be syntactically correct"

# ==========================================
# NOTES & REMINDERS (Priority 50)
# ==========================================

notes_system:
  priority: 50
  enabled: true
  context: ["notes", "reminders"]
  description: "User notes and reminders system"
  
  usage:
    triggers:
      - "save a note"
      - "remember this"
      - "add to notes"
      - "make a note"
    actions:
      - "Add to NOTES.md under appropriate section"
      - "Update 'Last updated' date"
      - "Keep organized and clear"
    file_location: "/NOTES.md"
    tracked_in_git: true